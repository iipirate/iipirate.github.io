<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="iipirate.github.io">
<meta property="og:type" content="website">
<meta property="og:title" content="王一川的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="王一川的博客">
<meta property="og:description" content="iipirate.github.io">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王一川的博客">
<meta name="twitter:description" content="iipirate.github.io">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>王一川的博客</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王一川的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">iipirate</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/07/各种验证邮件地址的正则表达式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/07/各种验证邮件地址的正则表达式/" itemprop="url">各种验证邮件地址的正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-07T20:13:50+08:00">
                2017-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="用正则表达式验证邮件地址似乎是一件简单的事情，但是如果要完美的验证一个合规的邮件地址，其实也许很复杂。邮件地址的规范来自于-RFC-5322-。"><a href="#用正则表达式验证邮件地址似乎是一件简单的事情，但是如果要完美的验证一个合规的邮件地址，其实也许很复杂。邮件地址的规范来自于-RFC-5322-。" class="headerlink" title="用正则表达式验证邮件地址似乎是一件简单的事情，但是如果要完美的验证一个合规的邮件地址，其实也许很复杂。邮件地址的规范来自于 RFC 5322 。"></a>用正则表达式验证邮件地址似乎是一件简单的事情，但是如果要完美的验证一个合规的邮件地址，其实也许很复杂。邮件地址的规范来自于 RFC 5322 。</h5><h5 id="聊一聊-各种验证邮件地址的正则表达式聊一聊-各种验证邮件地址的正则表达式邮件地址的规范来自于-RFC-5322-。有一个网站-emailregex-com-专门列出各种编程语言下的验证邮件地址的正则表达式，其中很多正则表达式都是我听说过而从未见过的复杂——我想说，做这个网站的程序员是被邮件验证这件事伤害了多深啊！"><a href="#聊一聊-各种验证邮件地址的正则表达式聊一聊-各种验证邮件地址的正则表达式邮件地址的规范来自于-RFC-5322-。有一个网站-emailregex-com-专门列出各种编程语言下的验证邮件地址的正则表达式，其中很多正则表达式都是我听说过而从未见过的复杂——我想说，做这个网站的程序员是被邮件验证这件事伤害了多深啊！" class="headerlink" title="聊一聊 各种验证邮件地址的正则表达式聊一聊 各种验证邮件地址的正则表达式邮件地址的规范来自于 RFC 5322 。有一个网站 emailregex.com 专门列出各种编程语言下的验证邮件地址的正则表达式，其中很多正则表达式都是我听说过而从未见过的复杂——我想说，做这个网站的程序员是被邮件验证这件事伤害了多深啊！"></a>聊一聊 各种验证邮件地址的正则表达式聊一聊 各种验证邮件地址的正则表达式邮件地址的规范来自于 RFC 5322 。有一个网站 emailregex.com 专门列出各种编程语言下的验证邮件地址的正则表达式，其中很多正则表达式都是我听说过而从未见过的复杂——我想说，做这个网站的程序员是被邮件验证这件事伤害了多深啊！</h5><p>其实，在产品环境中，一般来说并不需要这么复杂的正则表达式来做到99.99%正确。一般来说，从执行效率和测试覆盖率来说，只需要一个简单的版本即可：</p>
<p>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+/.[A-Z]{2,4}$/i</p>
<p>那么下面我们来看看这些更严谨、更复杂的正则表达式吧：<br>验证邮件地址的通用正则表达式（符合 RFC 5322 标准）</p>
<p>(?:[a-z0-9!#$%&amp;’<em>+/=?^_`{|}~-]+(?:/.[a-z0-9!#$%&amp;’</em>+/=?^_`{|}~-]+)<em>|”(?:[/x01-/x08/x0b/x0c/x0e-/x1f/x21/x23-/x5b/x5d-/x7f]|//[/x01-/x09/x0b/x0c/x0e-/x7f])</em>“)@(?:(?:<a href="?:[a-z0-9-]*[a-z0-9]">a-z0-9</a>?/.)+<a href="?:[a-z0-9-]*[a-z0-9]">a-z0-9</a>?|/[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[/x01-/x08/x0b/x0c/x0e-/x1f/x21-/x5a/x53-/x7f]|//[/x01-/x09/x0b/x0c/x0e-/x7f])+)/])</p>
<p>由于各种语言对正则表达式的支持不同、语法差异和覆盖率不同，所以，不同语言里面的正则表达式也不同：</p>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>这个是个简单的版本：</p>
<p>r”(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+/.[a-zA-Z0-9-.]+$)”</p>
<h3 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h3><p>这个有点复杂了：</p>
<p>/^[-a-z0-9~!$%^&amp;<em>_=+}{/‘?]+(/.[-a-z0-9~!$%^&amp;</em>_=+}{/‘?]+)<em>@([a-z0-9_][-a-z0-9_]</em>(/.[-a-z0-9_]+)*/.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}/.[0-9]{1,3}/.[0-9]{1,3}/.[0-9]{1,3}))(:[0-9]{1,5})?$/i</p>
<h3 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h3><p>[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+//.[A-Za-z]{2,6}</p>
<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p>PHP 的这个版本就更复杂了，覆盖率就更大一些：</p>
<p>/^(?!(?:(?:/x22?/x5C[/x00-/x7E]/x22?)|(?:/x22?[^/x5C/x22]/x22?)){255,})(?!(?:(?:/x22?/x5C[/x00-/x7E]/x22?)|(?:/x22?[^/x5C/x22]/x22?)){65,}@)(?:(?:[/x21/x23-/x27/x2A/x2B/x2D/x2F-/x39/x3D/x3F/x5E-/x7E]+)|(?:/x22(?:[/x01-/x08/x0B/x0C/x0E-/x1F/x21/x23-/x5B/x5D-/x7F]|(?:/x5C[/x00-/x7F]))<em>/x22))(?:/.(?:(?:[/x21/x23-/x27/x2A/x2B/x2D/x2F-/x39/x3D/x3F/x5E-/x7E]+)|(?:/x22(?:[/x01-/x08/x0B/x0C/x0E-/x1F/x21/x23-/x5B/x5D-/x7F]|(?:/x5C[/x00-/x7F]))</em>/x22)))<em>@(?:(?:(?!.</em>[^.]{64,})(?:(?:(?:xn–)?[a-z0-9]+(?:-[a-z0-9]+)<em>/.){1,126}){1,}(?:(?:[a-z][a-z0-9]</em>)|(?:(?:xn–)[a-z0-9]+))(?:-[a-z0-9]+)<em>)|(?:/[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.</em>[a-f0-9][:/]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:/.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))/]))$/iD</p>
<h3 id="Perl-Ruby"><a href="#Perl-Ruby" class="headerlink" title="Perl / Ruby"></a>Perl / Ruby</h3><p>对与 PHP 的版本，Perl 和 Ruby 表示不服，可以更严谨：</p>
<p>(?:(?:/r/n)?[ /t])<em>(?:(?:(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[/t]))<em>“(?:(?:/r/n)?[ /t])</em>))<em>@(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>|(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)<em>/&lt;(?:(?:/r/n)?[ /t])</em>(?:@(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[/t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>(?:,@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[/t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>)<em>:(?:(?:/r/n)?[ /t])</em>)?(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)(?:/.(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>))</em>@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>/&gt;(?:(?:/r/n)?[ /t])<em>)|(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>)</em>:(?:(?:/r/n)?[ /t])<em>(?:(?:(?:[^()&lt;&gt;@,;://“./[/]/000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>))<em>@(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>|(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)<em>/&lt;(?:(?:/r/n)?[ /t])</em>(?:@(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>(?:,@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/]/000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>)<em>:(?:(?:/r/n)?[ /t])</em>)?(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)(?:/.(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>))</em>@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>/&gt;(?:(?:/r/n)?[ /t])<em>)(?:,/s</em>(?:(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)(?:/.(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>))</em>@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>|(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)<em>/&lt;(?:(?:/r/n)?[ /t])</em>(?:@(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>(?:,@(?:(?:/r/n)?[/t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>)<em>:(?:(?:/r/n)?[ /t])</em>)?(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))<em>“(?:(?:/r/n)?[ /t])</em>)(?:/.(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|”(?:[^/“/r//]|//.|(?:(?:/r/n)?[ /t]))</em>“(?:(?:/r/n)?[ /t])<em>))</em>@(?:(?:/r/n)?[ /t])<em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/[([^/[/]/r//]|//.)</em>/](?:(?:/r/n)?[ /t])<em>)(?:/.(?:(?:/r/n)?[ /t])</em>(?:[^()&lt;&gt;@,;://“./[/] /000-/031]+(?:(?:(?:/r/n)?[ /t])+|/Z|(?=[/[“()&lt;&gt;@,;://“./[/]]))|/<a href="?:(?:/r/n">([^/[/]/r//]|//.)*/</a>?[ /t])<em>))</em>/&gt;(?:(?:/r/n)?[ /t])<em>))</em>)?;/s</p>
<h3 id="Perl-5-10-及以后版本"><a href="#Perl-5-10-及以后版本" class="headerlink" title="Perl 5.10 及以后版本"></a>Perl 5.10 及以后版本</h3><p>上面的版本，嗯，我可以说是天书吗？反正我是没有解读的想法了。当然，新版本的 Perl 语言还有一个更易读的版本（你是说真的么？）</p>
<p>/(?(DEFINE)<br>(?<address> (?&amp;mailbox) | (?&amp;group))<br>(?<mailbox> (?&amp;name_addr) | (?&amp;addr_spec))<br>(?<name_addr> (?&amp;display_name)? (?&amp;angle_addr))<br>(?<angle_addr> (?&amp;CFWS)? &lt; (?&amp;addr_spec) &gt; (?&amp;CFWS)?)<br>(?<group> (?&amp;display_name) : (?:(?&amp;mailbox_list) | (?&amp;CFWS))? ;<br>(?&amp;CFWS)?)<br>(?<display_name> (?&amp;phrase))<br>(?<mailbox_list> (?&amp;mailbox) (?: , (?&amp;mailbox))*)</mailbox_list></display_name></group></angle_addr></name_addr></mailbox></address></p>
<p>(?<addr_spec> (?&amp;local_part) /@ (?&amp;domain))<br>(?<local_part> (?&amp;dot_atom) | (?”ed_string))<br>(?<domain> (?&amp;dot_atom) | (?&amp;domain_literal))<br>(?<domain_literal> (?&amp;CFWS)? /[ (?: (?&amp;FWS)? (?&amp;dcontent))* (?&amp;FWS)?<br>/] (?&amp;CFWS)?)<br>(?<dcontent> (?&amp;dtext) | (?”ed_pair))<br>(?<dtext> (?&amp;NO_WS_CTL) | [/x21-/x5a/x5e-/x7e])</dtext></dcontent></domain_literal></domain></local_part></addr_spec></p>
<p>(?<atext> (?&amp;ALPHA) | (?&amp;DIGIT) | [!#/$%&amp;’<em>+-/=?^_`{|}~])<br>(?<atom> (?&amp;CFWS)? (?&amp;atext)+ (?&amp;CFWS)?)<br>(?<dot_atom> (?&amp;CFWS)? (?&amp;dot_atom_text) (?&amp;CFWS)?)<br>(?<dot_atom_text> (?&amp;atext)+ (?: /. (?&amp;atext)+)</dot_atom_text></dot_atom></atom></em>)</atext></p>
<p>(?<text> [/x01-/x09/x0b/x0c/x0e-/x7f])<br>(?<quoted_pair> // (?&amp;text))</quoted_pair></text></p>
<p>(?<qtext> (?&amp;NO_WS_CTL) | [/x21/x23-/x5b/x5d-/x7e])<br>(?<qcontent> (?&amp;qtext) | (?”ed_pair))<br>(?<quoted_string> (?&amp;CFWS)? (?&amp;DQUOTE) (?:(?&amp;FWS)? (?&amp;qcontent))*<br>(?&amp;FWS)? (?&amp;DQUOTE) (?&amp;CFWS)?)</quoted_string></qcontent></qtext></p>
<p>(?<word> (?&amp;atom) | (?”ed_string))<br>(?<phrase> (?&amp;word)+)</phrase></word></p>
<h1 id="Folding-white-space"><a href="#Folding-white-space" class="headerlink" title="Folding white space"></a>Folding white space</h1><p>(?<fws> (?: (?&amp;WSP)<em> (?&amp;CRLF))? (?&amp;WSP)+)<br>(?<ctext> (?&amp;NO_WS_CTL) | [/x21-/x27/x2a-/x5b/x5d-/x7e])<br>(?<ccontent> (?&amp;ctext) | (?”ed_pair) | (?&amp;comment))<br>(?<comment> /( (?: (?&amp;FWS)? (?&amp;ccontent))</comment></ccontent></ctext></em> (?&amp;FWS)? /) )<br>(?<cfws> (?: (?&amp;FWS)? (?&amp;comment))*<br>(?: (?:(?&amp;FWS)? (?&amp;comment)) | (?&amp;FWS)))</cfws></fws></p>
<h1 id="No-whitespace-control"><a href="#No-whitespace-control" class="headerlink" title="No whitespace control"></a>No whitespace control</h1><p>(?<no_ws_ctl> [/x01-/x08/x0b/x0c/x0e-/x1f/x7f])</no_ws_ctl></p>
<p>(?<alpha> [A-Za-z])<br>(?<digit> [0-9])<br>(?<crlf> /x0d /x0a)<br>(?<dquote> “)<br>(?<wsp> [/x20/x09])<br>)</wsp></dquote></crlf></digit></alpha></p>
<p>(?&amp;address)/x</p>
<h3 id="Ruby-简单版"><a href="#Ruby-简单版" class="headerlink" title="Ruby (简单版)"></a>Ruby (简单版)</h3><p>Ruby 表示，其实人家还有个简单版本：</p>
<p>//A([/w+/-].?)+@[a-z/d/-]+(/.[a-z]+)*/.[a-z]+/z/i</p>
<h3 id="NET"><a href="#NET" class="headerlink" title=".NET"></a>.NET</h3><p>这样的版本谁没有啊——.NET 说：</p>
<p>^/w+([-+.’]/w+)<em>@/w+([-.]/w+)</em>/./w+([-.]/w+)*$</p>
<h3 id="grep-命令"><a href="#grep-命令" class="headerlink" title="grep 命令"></a>grep 命令</h3><p>用 grep 命令在文件中查找邮件地址，我想你不会写个若干行的正则表达式吧，意思一下就行了：</p>
<p>$ grep -E -o “/b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+/.[A-Za-z]{2,6}/b” filename.txt</p>
<h3 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL Server"></a>SQL Server</h3><p>在 SQL Server 中也是可以用正则表达式的，不过这个代码片段应该是来自某个产品环境中的，所以，还体贴的照顾了那些把邮件地址写错的人：</p>
<p>select email<br>from table_name where<br>patindex (‘%[ &amp;’’,”:;!+=//()&lt;&gt;]%’, email) &gt; 0 – Invalid characters<br>or patindex (‘[@.-_]%’, email) &gt; 0 – Valid but cannot be starting character<br>or patindex (‘%[@.-_]’, email) &gt; 0 – Valid but cannot be ending character<br>or email not like ‘%@%.%’ – Must contain at least one @ and one .<br>or email like ‘%..%’ – Cannot have two periods in a row<br>or email like ‘%@%@%’ – Cannot have two @ anywhere<br>or email like ‘%.@%’ or email like ‘%@.%’ – Cannot have @ and . next to each other<br>or email like ‘%.cm’ or email like ‘%.co’ – Camaroon or Colombia? Typos.<br>or email like ‘%.or’ or email like ‘%.ne’ – Missing last letter</p>
<h3 id="Oracle-PL-SQL"><a href="#Oracle-PL-SQL" class="headerlink" title="Oracle PL/SQL"></a>Oracle PL/SQL</h3><p>这个是不是有点偷懒？尤其是在那些“复杂”的正则表达式之后：</p>
<p>SELECT email<br>FROM table_name<br>WHERE REGEXP_LIKE (email, ‘[A-Z0-9._%-]+@[A-Z0-9._%-]+/.[A-Z]{2,4}’);</p>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><p>好吧，看来最后也一样懒：</p>
<p>SELECT * FROM <code>users</code> WHERE <code>email</code> NOT REGEXP ‘^[A-Z0-9._%-]+@[A-Z0-9.-]+/.[A-Z]{2,4}$’;</p>
<p>那么，你有没有关于验证邮件地址的正则表达式分享给大家？</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/31/iptables命令使用详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/31/iptables命令使用详解/" itemprop="url">iptables命令使用详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-31T20:41:10+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>iptables的主要功能是实现对网络数据包进出设备及转发的控制。当数据包需要进入设备、从设备中流出或者经该设备转发、路由时，都可以使用iptables进行控制。</p>
<p>环境</p>
<p>操作系统：CentOS7.3</p>
<p>ip地址：172.16.55.7</p>
<h3 id="1-iptables中的四表五链及堵通策略"><a href="#1-iptables中的四表五链及堵通策略" class="headerlink" title="1.iptables中的四表五链及堵通策略"></a>1.iptables中的四表五链及堵通策略</h3><h5 id="A-四表是指，iptables的功能filter-nat-mangle-raw"><a href="#A-四表是指，iptables的功能filter-nat-mangle-raw" class="headerlink" title="A.四表是指，iptables的功能filter, nat, mangle, raw."></a>A.四表是指，iptables的功能filter, nat, mangle, raw.</h5><p>　　　　filter, 控制数据包是否允许进出及转发（INPUT、OUTPUT、FORWARD）,可以控制的链路有input, forward, output</p>
<p>　　　　nat, 控制数据包中地址转换，可以控制的链路有prerouting, input, output, postrouting</p>
<p>　　　　mangle,修改数据包中的原数据，可以控制的链路有prerouting, input, forward, output, postrouting</p>
<p>　　　　raw,控制nat表中连接追踪机制的启用状况，可以控制的链路有prerouting, output</p>
<p>　　注：在centos7中，还有security表，不过这里不作介绍</p>
<h5 id="B-五链是指内核中控制网络的NetFilter定义的五个规则链，分别为"><a href="#B-五链是指内核中控制网络的NetFilter定义的五个规则链，分别为" class="headerlink" title="B.五链是指内核中控制网络的NetFilter定义的五个规则链，分别为"></a>B.五链是指内核中控制网络的NetFilter定义的五个规则链，分别为</h5><p>　　　　PREROUTING, 路由前</p>
<p>　　　　INPUT, 数据包流入口</p>
<p>　　　　FORWARD, 转发管卡</p>
<p>　　　　OUTPUT, 数据包出口</p>
<p>　　　　POSTROUTING, 路由后</p>
<h5 id="C-堵通策略是指对数据包所做的操作，一般有两种操作——“通（ACCEPT）”、“堵（DROP）”，还有一种操作很常见REJECT"><a href="#C-堵通策略是指对数据包所做的操作，一般有两种操作——“通（ACCEPT）”、“堵（DROP）”，还有一种操作很常见REJECT" class="headerlink" title="C.堵通策略是指对数据包所做的操作，一般有两种操作——“通（ACCEPT）”、“堵（DROP）”，还有一种操作很常见REJECT."></a>C.堵通策略是指对数据包所做的操作，一般有两种操作——“通（ACCEPT）”、“堵（DROP）”，还有一种操作很常见REJECT.</h5><p>谈谈REJECT和DROP之间的区别，Ming写了一封信，向Rose示爱。Rose如果不愿意接受，她可以不回应Ming,这个时候Ming不确定Rose是否接到了信；Rose也可以同样写一封信，在信中明确地拒绝Ming。前一种操作就如同执行了DROP操作，而后一种操作就如同REJECT操作。</p>
<h3 id="2-iptables命令的语法规则"><a href="#2-iptables命令的语法规则" class="headerlink" title="2.iptables命令的语法规则"></a>2.iptables命令的语法规则</h3><p>iptables [-t table] COMMAND [chain] CRETIRIA -j ACTION<br>　　-t table，是指操作的表，filter、nat、mangle或raw, 默认使用filter</p>
<p>　　COMMAND，子命令，定义对规则的管理</p>
<p>　　chain, 指明链路</p>
<p>　　CRETIRIA, 匹配的条件或标准</p>
<p>　　ACTION,操作动作</p>
<p>　　例如，不允许10.8.0.0/16网络对80/tcp端口进行访问，</p>
<p>iptables -A INPUT -s 10.8.0.0/16 -d 172.16.55.7 -p tcp –dport 80 -j DROP<br>　　查看iptables列表</p>
<p>iptables -nL</p>
<h3 id="3-链管理"><a href="#3-链管理" class="headerlink" title="3.链管理"></a>3.链管理</h3><p>　　-N, –new-chain chain：新建一个自定义的规则链；</p>
<p>　　-X, –delete-chain [chain]：删除用户自定义的引用计数为0的空链；</p>
<p>　　-F, –flush [chain]：清空指定的规则链上的规则；</p>
<p>　　-E, –rename-chain old-chain new-chain：重命名链；</p>
<p>　　-Z, –zero [chain [rulenum]]：置零计数器；　　</p>
<p>　　-P, –policy chain target， 设置链路的默认策略</p>
<h3 id="4-规则管理"><a href="#4-规则管理" class="headerlink" title="4.规则管理"></a>4.规则管理</h3><p>　　-A, –append chain rule-specification：追加新规则于指定链的尾部；</p>
<p>　　-I, –insert chain [rulenum] rule-specification：插入新规则于指定链的指定位置，默认为首部；</p>
<p>　　-R, –replace chain rulenum rule-specification：替换指定的规则为新的规则；</p>
<p>　　-D, –delete chain rulenum：根据规则编号删除规则；</p>
<h3 id="5-查看规则"><a href="#5-查看规则" class="headerlink" title="5.查看规则　"></a>5.查看规则　</h3><p>　　-L, –list [chain]：列出规则；</p>
<p>　　-v, –verbose：详细信息；</p>
<p>　　　　-vv， -vvv  更加详细的信息</p>
<p>　　-n, –numeric：数字格式显示主机地址和端口号；</p>
<p>　　-x, –exact：显示计数器的精确值；</p>
<p>　　–line-numbers：列出规则时，显示其在链上的相应的编号；</p>
<p>　　-S, –list-rules [chain]：显示指定链的所有规则；</p>
<p>　　查看规则的一般内容：</p>
<p>　　</p>
<h3 id="6-匹配条件"><a href="#6-匹配条件" class="headerlink" title="6.匹配条件"></a>6.匹配条件</h3><p>匹配条件包括通用匹配条件和扩展匹配条件。</p>
<p>通用匹配条件是指针对源地址、目标地址的匹配，包括单一源IP、单一源端口、单一目标IP、单一目标端口、数据包流经的网卡以及协议。</p>
<p>扩展匹配条件指通用匹配之外的匹配条件。</p>
<h5 id="6-1通用匹配条件"><a href="#6-1通用匹配条件" class="headerlink" title="6.1通用匹配条件"></a>6.1通用匹配条件</h5><p>[!] -s, –source address[/mask][,…]：检查报文的源IP地址是否符合此处指定的范围，或是否等于此处给定的地址；</p>
<p>[!] -d, –destination address[/mask][,…]：检查报文的目标IP地址是否符合此处指定的范围，或是否等于此处给定的地址；</p>
<p>[!] -p, –protocol protocol：匹配报文中的协议，可用值tcp, udp, udplite, icmp, icmpv6,esp, ah, sctp, mh 或者 “all”, 亦可以数字格式指明协议；<br>[!] -i, –in-interface name：限定报文仅能够从指定的接口流入；only for packets entering the INPUT, FORWARD and PREROUTING chains.</p>
<p>[!] -o, –out-interface name：限定报文仅能够从指定的接口流出；for packets entering the FORWARD, OUTPUT and POSTROUTING chains.</p>
<h5 id="6-2扩展匹配条件"><a href="#6-2扩展匹配条件" class="headerlink" title="6.2扩展匹配条件"></a>6.2扩展匹配条件</h5><p>隐含扩展匹配条件<br>-p tcp：可直接使用tcp扩展模块的专用选项；<br>　　[!] –source-port,–sport port[:port] 匹配报文源端口；可以给出多个端口，但只能是连续的端口范围 ；</p>
<p>　　[!] –destination-port,–dport port[:port] 匹配报文目标端口；可以给出多个端口，但只能是连续的端口范围 ；</p>
<p>　　[!] –tcp-flags mask comp 匹配报文中的tcp协议的标志位；Flags are: SYN ACK FIN RST URG PSH ALL NONE；<br>　　　　mask：要检查的FLAGS list，以逗号分隔；<br>　　　　comp：在mask给定的诸多的FLAGS中，其值必须为1的FLAGS列表，余下的其值必须为0；</p>
<p>　　[!] –syn： –tcp-flags SYN,ACK,FIN,RST SYN</p>
<p>-p udp：可直接使用udp协议扩展模块的专用选项：</p>
<p>　　[!] –source-port,–sport port[:port]</p>
<p>　　[!] –destination-port,–dport port[:port]</p>
<p>-p icmp<br>　　[!] –icmp-type {type[/code]|typename}</p>
<p>　　　　0/0：echo reply</p>
<p>　　　　8/0：echo request</p>
<p>显式扩展匹配条件<br>　　必须用-m option选项指定扩展匹配的类型，常见的有以下几种，</p>
<h5 id="1、multiport"><a href="#1、multiport" class="headerlink" title="1、multiport"></a>1、multiport</h5><p>以离散或连续的 方式定义多端口匹配条件，最多15个；</p>
<p>　　[!] –source-ports,–sports port[,port|,port:port]…：指定多个源端口；</p>
<p>　　[!] –destination-ports,–dports port[,port|,port:port]…：指定多个目标端口；</p>
<p>iptables -I INPUT -d 172.16.0.7 -p tcp -m multiport –dports 22,80,139,445,3306 -j ACCEPT</p>
<h5 id="2、iprange"><a href="#2、iprange" class="headerlink" title="2、iprange"></a>2、iprange</h5><p>以连续地址块的方式来指明多IP地址匹配条件；</p>
<p>　　[!] –src-range from[-to]</p>
<p>　　[!] –dst-range from[-to]</p>
<p> iptables -I INPUT -d 172.16.0.7 -p tcp -m multiport –dports 22,80,139,445,3306 -m iprange –src-range 172.16.0.61-172.16.0.70 -j REJECT</p>
<h5 id="3、time"><a href="#3、time" class="headerlink" title="3、time"></a>3、time</h5><p>匹配数据包到达的时间</p>
<p>　　–timestart hh:mm[:ss]</p>
<p>　　–timestop hh:mm[:ss]</p>
<p>　　[!] –weekdays day[,day…]</p>
<p>　　[!] –monthdays day[,day…]</p>
<p>　　–datestart YYYY[-MM[-DD[Thh[:mm[:ss]]]]]</p>
<p>　　–datestop YYYY[-MM[-DD[Thh[:mm[:ss]]]]]</p>
<p>　　–kerneltz：使用内核配置的时区而非默认的UTC；</p>
<h5 id="4、string"><a href="#4、string" class="headerlink" title="4、string"></a>4、string</h5><p>匹配数据包中的字符</p>
<p>　　–algo {bm|kmp}</p>
<p>　　[!] –string pattern</p>
<p>　　[!] –hex-string pattern</p>
<p>　　–from offset</p>
<p>　　–to offset</p>
<p>~]# iptables -I OUTPUT -m string –algo bm –string “gay” -j REJECT</p>
<h5 id="5、connlimit"><a href="#5、connlimit" class="headerlink" title="5、connlimit"></a>5、connlimit</h5><p>用于限制同一IP可建立的连接数目</p>
<p>　　–connlimit-upto n</p>
<p>　　–connlimit-above n</p>
<p>~]# iptables -I INPUT -d 172.16.0.7 -p tcp –syn –dport 22 -m connlimit –connlimit-above 2 -j REJECT</p>
<h5 id="6、limit"><a href="#6、limit" class="headerlink" title="6、limit"></a>6、limit</h5><p>限制收发数据包的速率</p>
<p>　　–limit rate[/second|/minute|/hour|/day]</p>
<p>　　–limit-burst number</p>
<p>~]# iptables -I OUTPUT -s 172.16.0.7 -p icmp –icmp-type 0 -j ACCEPT</p>
<h5 id="7、state"><a href="#7、state" class="headerlink" title="7、state"></a>7、state</h5><p>限制收发包的状态</p>
<p>　　[!] –state state</p>
<p>　　INVALID, ESTABLISHED, NEW, RELATED or UNTRACKED.</p>
<p>　　NEW: 新连接请求；</p>
<p>　　ESTABLISHED：已建立的连接；</p>
<p>　　INVALID：无法识别的连接；</p>
<p>　　RELATED：相关联的连接，当前连接是一个新请求，但附属于某个已存在的连接；</p>
<p>　　UNTRACKED：未追踪的连接；</p>
<p>state扩展：</p>
<p>内核模块装载：<br>　　nf_conntrack<br>　　nf_conntrack_ipv4</p>
<p>手动装载：<br>　　nf_conntrack_ftp</p>
<p>追踪到的连接：<br>　　/proc/net/nf_conntrack</p>
<p>调整可记录的连接数量最大值：<br>　　/proc/sys/net/nf_conntrack_max</p>
<p>超时时长：<br>　　/proc/sys/net/netfilter/<em>timeout</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/30/磁盘管理命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/30/磁盘管理命令/" itemprop="url">磁盘管理命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-30T20:41:35+08:00">
                2017-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Linux有着管理各种存储设备的强大能力。Linux把所有磁盘都当作文件管理，从而简化我们对其进行的读写等操作。<br>每个硬盘的分区命名：<br>    IDE硬盘（以/dev/hda为例）为：<br>        /dev/hda1<br>        /dev/hda2<br>        /dev/hda3</p>
<pre><code>SATA或其他硬盘（以/dev/sda为例）为：
    /dev/sda1
    /dev/sda2
    /dev/sda3
</code></pre><p>磁盘属于块设备,我们可以使用ls命令查看下服务器上所有已安装的磁盘:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@linux ~]# ls -l /dev | grep &quot;[[:space:]][h|s]&quot; | grep &quot;^b&quot;</div><div class="line">brw-rw----. 1 root disk      8,   0 Dec  3 11:10 sda</div><div class="line">brw-rw----. 1 root disk      8,   1 Dec  3 11:10 sda1</div><div class="line">brw-rw----. 1 root disk      8,   2 Dec  3 11:10 sda2</div><div class="line">brw-rw----. 1 root disk      8,  16 Dec  3 11:10 sdb</div><div class="line">brw-rw----. 1 root cdrom    11,   0 Dec  3 11:10 sr0</div></pre></td></tr></table></figure></p>
<p>注：命令中的两个grep命令用来过滤出磁盘所在的行。</p>
<p>说到分区，我们不得不提下MBR，MBR是mater boot recoder的简写，其存在于硬盘的0磁道0扇区，占据512B的空间（每个扇区也就512B），这512B的空间又细分如下：<br>    446B：存放boot loader，几开机引导程序；<br>    64B：存放分区信息，每条分区信息占16B的空间，所以其最多存储4条分区信息，<br>            所以每个硬盘最多能分出4个主分区或3个主分区加一个扩展分区；<br>    剩下的2B空间：是此MBR的有效性标识。</p>
<p>通过上面的信息我们知道每个硬盘最多能分出4个主分区或3个主分区加一个扩展分区，那是不是每个硬盘最多只能分4个分区呢？<br>非也，我们可以在这四个分区中留出一个做为扩展分区，扩展分区又可以细分出多个逻辑分区。扩展分区中的逻辑分区编号只能从5开始，比如我有一块硬盘，划分出2个主分区和1个扩展分区（主分区+扩展分区数量不能超过4个），扩展分区下又有两个逻辑分区，其变号为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/sdb1               1         262     2104483+  83  Linux</div><div class="line">/dev/sdb2             263         524     2104515   83  Linux</div><div class="line">/dev/sdb3             525        1830    10490445    5  Extended</div><div class="line">/dev/sdb5             525        1178     5253223+  83  Linux</div><div class="line">/dev/sdb6            1179        1830     5237158+  83  Linux</div></pre></td></tr></table></figure></p>
<p>但是分区是怎么划分出来的呢？<br>是通过fdisk命令：<br>使用方法：fdisk /dev/DEVICE_NAME 或者 fdisk -l<br>直接在shell中输入fdisk -l只会把所有的硬盘和分区信息输出到屏幕，可以自行测试。<br>对于fdisk /dev/DEVICE<br>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@linux ~]# fdisk /dev/sdb</div></pre></td></tr></table></figure></p>
<p>会进入/dev/sdb的操作界面，直接在提示符处输入对应的命令按提示操作即可，当不知道怎么操作时可以输入m查看帮助：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Command (m for help): m</div><div class="line">Command action</div><div class="line">    a   toggle a bootable flag</div><div class="line">    b   edit bsd disklabel</div><div class="line">    c   toggle the dos compatibility flag</div><div class="line">    d   delete a partition</div><div class="line">    l   list known partition types</div><div class="line">    m   print this menu</div><div class="line">    n   add a new partition</div><div class="line">    o   create a new empty DOS partition table</div><div class="line">    p   print the partition table</div><div class="line">    q   quit without saving changes</div><div class="line">    s   create a new empty Sun disklabel</div><div class="line">    t   change a partition&apos;s system id</div><div class="line">    u   change display/entry units</div><div class="line">    v   verify the partition table</div><div class="line">    w   write table to disk and exit</div><div class="line">    x   extra functionality (experts only)</div></pre></td></tr></table></figure></p>
<p>常用的输入:<br>        p: 显示已有分区<br>        n: 创建<br>        d: 删除<br>        w: 保存<br>        q: 退出<br>        l: 列出可用的分区类型，类型很重要，比如swap只能用82类型的分区；<br>创建一个分区：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Command (m for help): n    &lt;---n表示创建新分区</div><div class="line">Command action</div><div class="line">    e   extended</div><div class="line">    p   primary partition (1-4)</div><div class="line">    p    &lt;---表示创建主分区，e表示创建扩展分区</div><div class="line">    Partition number (1-4): 1    &lt;---输入主分区号，第一个则输入1</div><div class="line">    First cylinder (1-2610, default 1):     &lt;---输入分区开始的磁柱，直接回车按默认即可</div><div class="line">    Using default value 1</div><div class="line">    Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-2610, default 2610): +2G    &lt;---输入结束的磁柱，也可输入大小，比+2G或者+2000M。回车即创建完成。</div></pre></td></tr></table></figure>
<p>创建扩展分区与创建主分区步骤相同；</p>
<p>在扩展分区下创建一个逻辑分区：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Command (m for help): n</div><div class="line">Command action</div><div class="line">   l   logical (5 or over)    &lt;---注意逻辑分区号是从5开始的。</div><div class="line">   p   primary partition (1-4)</div><div class="line">l    &lt;---l（L的小写）表示逻辑分区</div><div class="line">First cylinder (525-1830, default 525):</div><div class="line">Using default value 525</div><div class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (525-1830, default 1830): +5G</div></pre></td></tr></table></figure></p>
<p>创建逻辑分区与创建主分区过程基本相同，只是创建逻辑分区不需要输入分区号。<br>切记，操作完成退出前别忘了输入w执行保存分区信息，否则分区失败，也就是没有分区；<br>最后输入q，退出fdisk命令。<br>更多fdisk用法请自行man。</p>
<p>分区完成可以在shell中使用 fdisk -l 查看或者 cat /proc/partitions 查看。<br>若 cat /proc/partitions 后没有显示新建的分区，可以使用partx命令让内核重新读取分区信息：<br>    partx -a /dev/sdb;<br>          -a表示add；<br>          更多partx用法请自行man。</p>
<p>创建分区后还是不能立即使用的，因为还要通过格式化和挂载才能使用，我们就先来看下怎么格式化分区吧；<br>格式化就是把分区格式化成特定的文件系统；<br>Linux支持的文件系统有：ext2, ext3, ext4, xfs, btrfs, reiserfs, jfs, swap；<br>其中ext2和VFAT为非日志文件系统，其余全部为日志文件系统；日志文件系统较为先进，稳定性较好。<br>    还有两个特殊的：<br>        swap内存交换分区，用于存放内存交换页面文件；<br>        Linux的虚拟文件系统: VFS，用于虚拟所有的文件系统，给用户提供统一的接口。<br>为什么需要文件系统呢？<br>文件系统是为方便操作系统对分区的管理而对空间进行的一系列规划整理，打个比方，你要做一个书架，你是不是要好好的划分下书架的空间以便于更好管理书架并放置更多的书呢？<br>ext系列文件系统在分区中是以如下方式组织分区空间的：</p>
<p>格式化分区的具体命令有mkfs，mke2fs，用法如下：</p>
<pre><code>1. mkfs.FS_TYPE OPTION DEVICE 或者 mkfs -t FS_TYPE DEVICE
                有用OPTION：
                        -L &apos;LABEL&apos; 添加lable
                注：FS_TYPE为ext2, ext3, ext4, xfs, btrfs, reiserfs, jfs, swap等文件系统名称。

2. mke2fs OPTION DEVICE_NAME，DEVICE_NAME指分区名称
        OPTION:
            -t {ext2|ext3|ext4}
            -b {1024|2048|4096} 设置存储基本单元block的大小
            -L &apos;LABLE&apos; 用于设置分区的LABEL
            -j 相当于-t ext3, 即使用日志功能
            -i #: 为数据空间中每多少个字节创建一个inode, 此大小不应该小于block的大小，
                            否则inode的数量将比block还多。。。。。。
            -N #: 为数据空间创建多少个inode
            -m #: 为管理人员预留的空间占据的百分比. 默认是5, 即5%
            -O FEATURE[,…] 启用指定特性
            -O ^FEATURE[,…] 关闭指定特性
            注：mkfs.ext3 = mkfs -t ext3 = mke2fs -j = mke2fs -t ext3
</code></pre><p>其他常用命令：</p>
<pre><code>1. blkid 分区: 显示分区信息
    或者：
    blkid -U UUID 根据UUID查找设备
    blkid -L LABEL 根据LABEL查找设备

2. e2lable DEVICE [LABEL]，查看或设定LABEL
3. tune2fs OPTION DEVICE_NAME: 重新设定ext系统文件系统可调整参数的值
    OPTION：
        -l 查看超级块信息
        -L &apos;LABEL&apos; 设定LABEL
        -m # 修改预留给管理人员的空间百分比
        -j: 打开日志功能, 将ext2 升级为ext3
        -O 文件系统属性启用或禁用
        -o 指定默认挂载选项
4. dumpe2fs OPTION DEVICE_NAME: 输出DEVICE的信息
    OPTION：
        -h: 查看超级块信息
5. mkswap: 创建交换空间
    用法：mkswap [OPTION] DEVICE
    注意：前提调整DEVICE类型为82，可用类型可以通过fdisk DEVICE然后输入l查看。
</code></pre><p>文件系统监测与修复命令:<br>    1.fsck: file system check的简写，用法如下：<br>        fsck.FS_TYPE 或 fsck -t FS_TYPE<br>            FS_TYPE 一定要与分区实际的文件系统类型对应<br>            OPTION：<br>                -a 自动修改错误<br>                -r 交互式修复错误<br>                e2fsck: ext系列文件系统专用<br>                -y 自动回答为yes<br>                -f 强制修复</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/26/爬取糗事百科的Python脚本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/26/爬取糗事百科的Python脚本/" itemprop="url">爬取糗事百科的Python脚本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-26T21:22:34+08:00">
                2017-10-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#糗事百科</span></div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"><span class="keyword">import</span> re</div><div class="line">headers = (<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.221 Safari/537.36 SE 2.X MetaSr 1.0"</span>)</div><div class="line">opener = urllib.request.build_opener()</div><div class="line">opener.addheaders = [headers]</div><div class="line">urllib.request.install_opener(opener)</div><div class="line"><span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>):</div><div class="line">    url = <span class="string">"http://www.qiushibaike.com/8hr/page/"</span>+ str(k)</div><div class="line">    data = opener.open(url).read().decode(<span class="string">'utf-8'</span>,<span class="string">'ignore'</span>)</div><div class="line">    pat = <span class="string">'&lt;div class="content"&gt;\s*?&lt;span&gt;(.*?)&lt;/span&gt;.*?&lt;/div&gt;'</span></div><div class="line">    rst = re.compile(pat,re.S).findall(data)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(rst)):</div><div class="line">        print(rst[i])</div><div class="line">        print(<span class="string">"----------------"</span>)</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/25/linux一些经典书籍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/25/linux一些经典书籍/" itemprop="url">linux一些经典书籍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-25T19:39:28+08:00">
                2017-10-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一、linux之路，路漫漫其修远兮，吾将上下而求索！先上经典书籍！"><a href="#一、linux之路，路漫漫其修远兮，吾将上下而求索！先上经典书籍！" class="headerlink" title="一、linux之路，路漫漫其修远兮，吾将上下而求索！先上经典书籍！"></a>一、linux之路，路漫漫其修远兮，吾将上下而求索！先上经典书籍！</h3><p>1.入门篇</p>
<p>《LINUX权威指南》书不错，写的很全面也比较广，涉及的不深，做为入门书籍不错，可以比较全面的了解linux 。另外比较热门的也可以看看《鸟哥的私房菜》等书，偏管理类的书。如果想做server方向的可以找来看看。</p>
<p>2.驱动篇</p>
<p>《LINUX设备驱动程序 》就是网上说的“LDD”，经典之作，必备书籍。国产经典《Linux驱动详细解》也是一本非常不错的书，很实用，书中源代码 分析比较多，基于2440的，对linux外围驱动有很全面的讲解。</p>
<p>3.内核篇</p>
<p>浙江大学的《LINUX内核源代码情景分析》，外国的《UNIX源代码分析》还有《深入理解linux内核》都是出名的经典巨作。</p>
<p>4.shell篇</p>
<p>《LINUX与UNIX Shell编程指南》</p>
<p>5.应用编程</p>
<p>不用说了肯定是《unix环境高级编程》被称为unix编程的圣经。</p>
<p>6.TCP/IP篇</p>
<p>《TCP/IP详解》作者W.Richard Stevens也是《unix环境高级编程》的作者，牛人出的书没有一本不是经典的。但是英年早逝，默哀一下。</p>
<p>7.c语言</p>
<p>《The C Programming Language》正是作者造出来的c语言，书能垃圾就怪了。<br>《c和指针》和《c缺陷和陷阱》两本必备。包含了c语言最容易出错的地方，加深c语言功力的好材料。</p>
<p>c专家编程，c语言技术手册， Practice c Programming 等。</p>
<p>8.算法</p>
<p>《算法导论》，床头必备喝</p>
<p>注：这些经典的书是经得起反复琢磨的，知识并不是一蹴而就的，需要反复实践，反复理解！千万不要妄想一口吃个胖子！</p>
<h3 id="二、如何学习linux"><a href="#二、如何学习linux" class="headerlink" title="二、如何学习linux"></a>二、如何学习linux</h3><p>Linux操作系统主要就是一些配置文件（/etc）和命令行工具（/bin /sbin /usr/bin /usr/sbin），要掌握操作系统的主要目录结构和配置文件，运用系统的命令行工具（shell脚本）完成常规的操作系统维护工作，监控工作。进而可以安装部署一些企业应用，进行监控、管理等等。</p>
<p>1.重要的命令：find，sed，awk，正则……</p>
<p>2.工具：gnu下的著名软件 gcc，gdb，vi，make……</p>
<p>3.unix编程，编译等。xwin开发方式，gtk，qt……</p>
<p>4.文件系统，/dev下的设备（会用），/var下重要的东西，/etc 下的配置（常用服务配置apache, ftpd, sshd, xinetd, squid, natd, named），系统启动顺序，配置相应服务等……</p>
<p>5.c，python，php等高级语言……</p>
<h3 id="三、个人水平定位"><a href="#三、个人水平定位" class="headerlink" title="三、个人水平定位"></a>三、个人水平定位</h3><p>1.初级：熟练使用命令、熟悉Shell编程、能配置简单的服务，清楚各类服务相关的配置文件的位置， 能看懂并可修改系统提供的配置脚本（/etc/<em>.</em>）。推荐书籍：<br>《鸟哥的私房菜基础篇、高级篇》<br>《Advanced Bash Shell》<br>2.中级：熟悉TCP/IP原理、OS原理、熟练使用C语言、Linux系统编程、网络编程。 推荐书籍：<br>《The C Programming Language》<br>《Unix环境高级编程》<br>《Linux程序设计》<br>《TCP/IP协议详解卷一》<br>《Unix网络高级编程》<br>3.高级： 内核，驱动级别。推荐书籍：<br>《Linux Device Driver》<br>《深入理解Linux内核》<br>《深入理解计算机系统》<br>《深入理解LINUX网络内幕》</p>
<h3 id="四、学习途径"><a href="#四、学习途径" class="headerlink" title="四、学习途径"></a>四、学习途径</h3><p>1.Help System  帮助文档（man）</p>
<p>2.online books  在线文档（wiki ，blogs）</p>
<p>3.Training Guide   培训教程</p>
<p>4.Topic Collections  专题</p>
<p>5.Forms           论坛</p>
<p>6.名家的书籍</p>
<p>7.IRC，邮件列表等</p>
<p>8.理论与理论中的实践的差别并不如理论与实践中的实践差别那样大！</p>
<h3 id="五、其他的书"><a href="#五、其他的书" class="headerlink" title="五、其他的书"></a>五、其他的书</h3><p>javascript基础教程，～高级程序设计，～权威指南，～DOM编程艺术，～设计模式，～入门经典</p>
<p>UNIX in a Nutshell，The unix programming environment，unix技术手册</p>
<p>managing projects with make</p>
<p>applying RCS and SCCS</p>
<h3 id="六、自己的路"><a href="#六、自己的路" class="headerlink" title="六、自己的路"></a>六、自己的路</h3><p>linux/unix (c , bash(shell) , 工具(vi, gcc, make) , 内核机制 , python(高级语言) , 开源)</p>
<p>设计理念，系统管理，unix环境，服务器，嵌入式，桌面，移动设备</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/24/linux目录详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/24/linux目录详解/" itemprop="url">linux目录详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-24T21:14:21+08:00">
                2017-10-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1、/- 根<br>每一个文件和目录从根目录开始。<br>只有root用户具有该目录下的写权限。请注意，/root是root用户的主目录，这与/.不一样</p>
<p>2、/bin中 - 用户二进制文件<br>包含二进制可执行文件。<br>在单用户模式下，你需要使用的常见linux命令都位于此目录下。系统的所有用户使用的命令都设在这里。<br>例如：ps、ls、ping、grep、cp</p>
<p>3、/sbin目录 - 系统二进制文件<br>就像/bin，/sbin同样也包含二进制可执行文件。<br>但是，在这个目录下的linux命令通常由系统管理员使用，对系统进行维护。例如：iptables、reboot、fdisk、ifconfig、swapon命令</p>
<p>4、/etc - 配置文件<br>包含所有程序所需的配置文件。<br>也包含了用于启动/停止单个程序的启动和关闭shell脚本。例如：/etc/resolv.conf、/etc/logrotate.conf</p>
<p>5、/dev - 设备文件<br>包含设备文件。<br>这些包括终端设备、USB或连接到系统的任何设备。例如：/dev/tty1、/dev/usbmon0</p>
<p>6、/proc - 进程信息<br>包含系统进程的相关信息。<br>这是一个虚拟的文件系统，包含有关正在运行的进程的信息。例如：/proc/{pid}目录中包含的与特定pid相关的信息。<br>这是一个虚拟的文件系统，系统资源以文本信息形式存在。例如：/proc/uptime</p>
<p>7、/var - 变量文件<br>var代表变量文件。<br>这个目录下可以找到内容可能增长的文件。<br>这包括 - 系统日志文件（/var/log）;包和数据库文件（/var/lib）;电子邮件（/var/mail）;打印队列（/var/spool）;锁文件（/var/lock）;多次重新启动需要的临时文件（/var/tmp）;</p>
<p>8、/tmp - 临时文件<br>包含系统和用户创建的临时文件。<br>当系统重新启动时，这个目录下的文件都将被删除。</p>
<p>9、/usr - 用户程序<br>包含二进制文件、库文件、文档和二级程序的源代码。<br>/usr/bin中包含用户程序的二进制文件。如果你在/bin中找不到用户二进制文件，到/usr/bin目录看看。例如：at、awk、cc、less、scp。<br>/usr/sbin中包含系统管理员的二进制文件。如果你在/sbin中找不到系统二进制文件，到/usr/sbin目录看看。例如：atd、cron、sshd、useradd、userdel。<br>/usr/lib中包含了/usr/bin和/usr/sbin用到的库。<br>/usr/local中包含了从源安装的用户程序。例如，当你从源安装Apache，它会在/usr/local/apache2中。</p>
<p>10、/home - HOME目录<br>所有用户用home目录来存储他们的个人档案。<br>例如：/home/john、/home/nikita</p>
<p>11、/boot - 引导加载程序文件<br>包含引导加载程序相关的文件。<br>内核的initrd、vmlinux、grub文件位于/boot下。<br>例如：initrd.img-2.6.32-24-generic、vmlinuz-2.6.32-24-generic</p>
<p>12、/lib - 系统库<br>包含支持位于/bin和/sbin下的二进制文件的库文件.<br>库文件名为 ld<em>或lib</em>.so.*<br>例如：ld-2.11.1.so，libncurses.so.5.7</p>
<p>13、/opt - 可选的附加应用程序<br>opt代表可选的。<br>包含从个别厂商的附加应用程序。<br>附加应用程序应该安装在/opt/或者/opt/的子目录下。</p>
<p>14、/mnt - 挂载目录<br>临时安装目录，系统管理员可以挂载文件系统。</p>
<p>15、/media - 可移动媒体设备<br>用于挂载可移动设备的临时目录。<br>举例来说，挂载CD-ROM的/media/cdrom，挂载软盘驱动器的/media/floppy;</p>
<p>16、/srv - 服务数据<br>srv代表服务。<br>包含服务器特定服务相关的数据。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/10/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/10/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-10T16:34:59+08:00">
                2017-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/keystone介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/05/keystone介绍/" itemprop="url">keystone介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T22:02:58+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/云计算/" itemprop="url" rel="index">
                    <span itemprop="name">云计算</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>identity即keystone，它是openstack的验证中心，所有的服务都由它来认证。参考 <a href="http://blog.csdn.net/wsfdl/article/details/20492343" target="_blank" rel="external">http://blog.csdn.net/wsfdl/article/details/20492343</a></p>
</blockquote>
<h3 id="在keyston中有以下角色：tenants-租户或项目-、用户、角色、服务目录和端点"><a href="#在keyston中有以下角色：tenants-租户或项目-、用户、角色、服务目录和端点" class="headerlink" title="在keyston中有以下角色：tenants(租户或项目)、用户、角色、服务目录和端点"></a>在keyston中有以下角色：tenants(租户或项目)、用户、角色、服务目录和端点</h3><ul>
<li>如果把宾馆比作为Tenant，住宿的人就是User ，宾馆可以提供多种诸如住宿、娱乐、饮食等多种服务（Service），具体来说，住宿是一种具体的服务（Endpoint）。就住宿而言，有普通间和总统套房，如果你的VIP等级（Role）高，你可以享受到豪华的总统套房。入住前，我们需要拿身份证开房（Credential），认证身份证不是冒牌货后（Authenticaiton），会给你一个房卡（Token），然后你拿着房卡，就可以进入房间和享受各种服务。</li>
</ul>
<h2 id="以创建一个虚拟机（server）为例，keystone在openstack的访问流程大致如下："><a href="#以创建一个虚拟机（server）为例，keystone在openstack的访问流程大致如下：" class="headerlink" title="以创建一个虚拟机（server）为例，keystone在openstack的访问流程大致如下："></a>以创建一个虚拟机（server）为例，keystone在openstack的访问流程大致如下：</h2><ol>
<li>用户Alice通过自己的户名和密码向keystone申请token，keystone认证用户名和密码后，返回token1</li>
<li>Alice通过token1发送keystone查询他所拥有的租户，keystone验证token1成功后，返回Alice的所有Tenant</li>
<li>Alice选择一个租户，通过用户名和密码申请token，keystone认证用户名、密码、tenant后，返回token2。（其实1、2步仅仅是为了查询tenant，如果已经知道tenant，可以忽略1、2步）</li>
<li>Alice通过token2发送创建server的请求，keystone验证token2(包括该token是否有效，是否有权限创建虚拟机等)成功后，然后再把请求下发到nova，最终创建虚拟机</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/01/云计算openstack入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/01/云计算openstack入门/" itemprop="url">云计算openstack入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-01T17:11:58+08:00">
                2017-09-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/云计算/" itemprop="url" rel="index">
                    <span itemprop="name">云计算</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="云计算概述"><a href="#云计算概述" class="headerlink" title="云计算概述"></a>云计算概述</h2><ul>
<li>云计算从广义上可以分为如下几种模式：IaaS（基础设施即服务）、PaaS（平台即服务）、SaaS（软件即服务）</li>
</ul>
<ol>
<li>IaaS Amazon、阿里云、腾讯云提供的云主机即IaaS，我们拿到的是一台机器，可以自定义操作系统。<br>PaaS 面向开发者，直接给用户提供一个平台来运行用户的程序，早期的idc服务商卖的主机、新浪的sae、阿里云的云数据库等。</li>
<li>SaaS 卖的是服务，比如腾讯企业邮箱、印象笔记等</li>
<li>openstack是目前比较流行的一个实现云计算平台的项目</li>
</ol>
<h2 id="openstack简介"><a href="#openstack简介" class="headerlink" title="openstack简介"></a>openstack简介</h2><ul>
<li>发布版本  <a href="http://releases.openstack.org/" target="_blank" rel="external">http://releases.openstack.org/</a><br>目前稳定版本为Liberty</li>
</ul>
<blockquote>
<p>6个核心服务：nova（计算中心，对比阿里云的ESC，支持kvm,xen等虚拟化技术）、keystone（认证中心）、neutron（网络服务中心）、swift（对象存储服务，存储图片，附件等文件，对比腾讯云的COS）、cinder（块存储服务，云盘）、glance（镜像管理中心）</p>
</blockquote>
<p><img src="http://oveawccz5.bkt.clouddn.com/666.jpg" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/31/Shell-基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王一川">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王一川的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/31/Shell-基础/" itemprop="url">Shell 基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-31T20:15:06+08:00">
                2017-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="shell基础知识"><a href="#shell基础知识" class="headerlink" title="shell基础知识"></a>shell基础知识</h2><ul>
<li>shell的定义：linux shell就是我们输入命令的命令行，他的作用就是将我们输入的命令解释成内核可以识别的代码（0或1），shell可以直接调用linux系统命令，也是一门脚本语言，可以把linux的命令写成一个脚本（shell 脚本）达到自动化运维的目的，shell脚本其实就是一组命令的集合，里面也可以有判断，函数，数组，循环等功能，是一个简单的脚本编程语言。</li>
<li>shell 大致分为“Bourne Shell”，“C Shell”这两种shell的语法彼此不兼容，C Shell 主要在BSD版本的Unix系统中使用，语法和C语言相类似。Bourne家族主要包括sh  ksh  Bash  pah  zsh这些。C家族主要包括 csh 和tcsh。我们linux中使用的是Bourne家族中的Bash。</li>
<li>我们的linux默认支持的shell可以查看“/etc/shells”文件，文件里面每行就代表一种shell。我们可以在命令行直接输入文件里面的每一行的内容，就可以切换到指定shell，输入exit，可以退出返回到我们的上一个shell中。在这个文件里面有个“/sbin/nologin”这个和“/etc/passwd”文件中的很多用户的最后很相似，第7列的意思是用户登录到linux系统中的权限，如果这里是“/sbin/nologin”那就代表不允许登录，如果是“/bin/bash”就代表登录后可以使用权限范围内的bash的所有功能，如果是类似于“/sbin/shutdown”代表这个用户只能执行“/sbin/shutdown”这条命令</li>
</ul>
<h2 id="Shell脚本的执行"><a href="#Shell脚本的执行" class="headerlink" title="Shell脚本的执行"></a>Shell脚本的执行</h2><ol>
<li>赋予执行权限（x权限），直接运行，如果script.sh在root根目录。当前shell目录也在root根目录下面<br>a)  chmod 755 script.sh<br>b)  ./script.sh<br>c)  还可以绝对路径执行　/root/ script.sh</li>
<li>通过bash调用执行脚本（推荐）<br>a)  bash script.sh<br>b)  sh scritp.sh</li>
</ol>
<h5 id="如果执行的脚本是用windows编辑好复制到linux来的，那么运行的时候会报错。因为两种系统的加车符号不一样。linux的回车符号是“-”（可以用cat-–A-可以查看到文件的回车符），-windows的回车符号是“-M-”。这时候我们可以用工具进行转换，这个工具需要安装，dos2unix或者unix2dos分别是从windows到linux和linux到windows的转换，需要哪个装哪个"><a href="#如果执行的脚本是用windows编辑好复制到linux来的，那么运行的时候会报错。因为两种系统的加车符号不一样。linux的回车符号是“-”（可以用cat-–A-可以查看到文件的回车符），-windows的回车符号是“-M-”。这时候我们可以用工具进行转换，这个工具需要安装，dos2unix或者unix2dos分别是从windows到linux和linux到windows的转换，需要哪个装哪个" class="headerlink" title="如果执行的脚本是用windows编辑好复制到linux来的，那么运行的时候会报错。因为两种系统的加车符号不一样。linux的回车符号是“$”（可以用cat –A 可以查看到文件的回车符）， windows的回车符号是“^M$”。这时候我们可以用工具进行转换，这个工具需要安装，dos2unix或者unix2dos分别是从windows到linux和linux到windows的转换，需要哪个装哪个"></a>如果执行的脚本是用windows编辑好复制到linux来的，那么运行的时候会报错。因为两种系统的加车符号不一样。linux的回车符号是“$”（可以用cat –A 可以查看到文件的回车符）， windows的回车符号是“^M$”。这时候我们可以用工具进行转换，这个工具需要安装，dos2unix或者unix2dos分别是从windows到linux和linux到windows的转换，需要哪个装哪个</h5>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">王一川</p>
            <p class="site-description motion-element" itemprop="description">iipirate.github.io</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王一川</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  







  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>

  
  <script type="text/javascript" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>
